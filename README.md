# üåä¬†Hydrostack

> **Plataforma open‚Äësource para dimensionar plantas de tratamiento de agua (PTAR / PTAP), generar informes normativos y acelerar proyectos h√≠dricos para comunidades, ingenieros y organismos gubernamentales.**

<p align="center">
  <img src="https://img.shields.io/github/actions/workflow/status/lucesdata/hydrostack/ci.yml?label=Build&style=for-the-badge"/>
  <img src="https://img.shields.io/badge/PostgreSQL-17-blue?style=for-the-badge"/>
  <img src="https://img.shields.io/badge/License-MIT-green.svg?style=for-the-badge"/>
  <img src="https://img.shields.io/badge/PRs-welcome-purple?style=for-the-badge"/>
</p>

---

## ‚ú®¬†Motivaci√≥n

La brecha entre el **dise√±o conceptual** de una planta de tratamiento y su **validaci√≥n ante autoridad ambiental** suele ser costosa y lenta. Hydrostack nace para:

1. Democratizar el acceso a **herramientas de c√°lculo** de alto nivel.
2. Reducir de **semanas a minutos** la elaboraci√≥n de memorias de c√°lculo e informes.
3. Facilitar que **l√≠deres comunitarios** impulsen proyectos de agua potable y saneamiento.

---

## üó∫Ô∏è¬†Tabla de contenidos

1. [Caracter√≠sticas clave](#caracter√≠sticas-clave)
2. [Capturas](#capturas)
3. [Instalaci√≥n r√°pida](#instalaci√≥n-r√°pida)
4. [Stack & Arquitectura](#stack--arquitectura)
5. [Estructura del c√≥digo](#estructura-del-c√≥digo)
6. [Base de datos](#base-de-datos)
7. [Roadmap detallado](#roadmap-detallado)
8. [Contribuir](#contribuir)
9. [Cr√©ditos](#cr√©ditos)
10. [Licencia](#licencia)

---

## Caracter√≠sticas clave

* üßÆ **Motor de c√°lculos** desacoplado para dimensionar PTAR/PTAP (caudales, cargas, unidades de proceso).
* üìù **Generador de informes** (PDF/Docx) con: memoria de c√°lculo, tablas de resultados, justificaci√≥n legal.
* üìö **Base legal versionada**: leyes, resoluciones y l√≠mites descargados por pa√≠s (actualizable v√≠a admin panel).
* üë• **Gesti√≥n multi‚Äëusuario**: roles *viewer*, *editor*, *admin*; proyectos colaborativos.
* üåê **API REST + OpenAPI 3.1** para integraciones con ERPs o portales gubernamentales.
* üöÄ **Deploy 1‚Äëclick** en Docker / Vercel / Fly.io.

---

## Capturas

> *Pr√≥ximamente*: mock‚Äëups de Figma y capturas del prototipo.

---

## Instalaci√≥n r√°pida

### Opci√≥n‚ÄØA ‚Äî Docker Compose

```bash
# clonamos y arrancamos
git clone git@github.com:lucesdata/hydrostack.git && cd hydrostack
docker compose up -d      # levanta postgres + backend placeholder
```

### Opci√≥n‚ÄØB ‚Äî Local (brew + Node)

```bash
# Base de datos
brew install postgresql@17
brew services start postgresql@17
createdb hydrostack_dev
psql hydrostack_dev -f schema.sql

# Backend (NestJS pr√≥ximamente)
pnpm install && pnpm dev
```

> **Tip VS¬†Code:** extensi√≥n *PostgreSQL* ‚Üí conecta a `localhost:5432 / hydrostack_dev` para explorar tablas.

---

## Stack & Arquitectura

| Capa     | Tecnolog√≠a                             | Notas                                          |
| -------- | -------------------------------------- | ---------------------------------------------- |
| Frontend | Next.js¬†14, Tailwind, shadcn/ui        | Wizard de dimensionamiento + dashboard         |
| Backend  | NestJS (TypeScript)                    | Autenticaci√≥n JWT, l√≥gica de negocio           |
| C√°lculos | Librer√≠a propia (`@hydrostack/engine`) | Unit tests + posibilidad de usarla CLI         |
| DB       | PostgreSQL¬†17 + pgcrypto               | Esquema en `schema.sql`; triggers `updated_at` |
| Infra    | Docker¬†+¬†Compose, GitHub¬†Actions       | CI/CD & despliegues                            |

![Arquitectura Logical](https://raw.githubusercontent.com/lucesdata/hydrostack-docs/main/diagrams/architecture_logical.png)

---

## Estructura del c√≥digo

```
hydrostack/
‚îú‚îÄ apps/
‚îÇ  ‚îî‚îÄ api/                # Backend NestJS
‚îú‚îÄ packages/
‚îÇ  ‚îî‚îÄ engine/             # Motor de c√°lculos
‚îú‚îÄ web/                   # Next.js frontend
‚îú‚îÄ schema.sql             # Esquema de base de datos
‚îú‚îÄ openapi.yaml           # API contract (en progreso)
‚îú‚îÄ docker-compose.yml
‚îî‚îÄ README.md
```

---

## Base de datos

`schema.sql` crea 7 tablas principales y 2 triggers de actualizaci√≥n autom√°tica. Carga inicial:

```bash
psql hydrostack_dev -f schema.sql
```

> **Seed legal:** script pendiente para poblar `regulations` y `parameter_limits`.

---

## Roadmap detallado

| Fase                           | Entregables                                         | Estado         |
| ------------------------------ | --------------------------------------------------- | -------------- |
| **1. Definici√≥n & alineaci√≥n** | Workshop de producto, mapa de normativas, MVP scope | ‚úÖ Completado   |
| **2. Prototipo UX**            | Wireframes Figma, arquitectura BD, API contract     | üîÑ En progreso |
| **3. MVP Alpha**               | Auth, c√°lculo PTAR simple, informes PDF             | ‚è≥ Q3¬†2025      |
| **4. Beta p√∫blica**            | Multi‚Äëusuario, PTAP, docker deploy, docs            | ‚è≥ Q4¬†2025      |
| **5. Extensiones**             | Integraci√≥n IoT, panel anal√≠ticas, multi‚Äëidioma     | üåì 2026        |

---

## Contribuir

1. **Fork** el repo y crea tu branch desde `main`.
2. Sigue la convenci√≥n **Conventional¬†Commits**.
3. Ejecuta `pnpm test` y `pnpm lint` antes de abrir la PR.
4. Para cambios en el motor de c√°lculos a√±ade tests en `packages/engine/__tests__`.

> Nos encanta recibir problemas, discusiones y PRs ‚ú®.

---

## Cr√©ditos

Proyecto creado por [@lucesdata](https://github.com/lucesdata) con la ayuda de colaboradores de la comunidad Hydrostack.

---

## Licencia

Hydrostack se publica bajo licencia **MIT**. Consulta el archivo [`LICENSE`](LICENSE) para m√°s detalles.
